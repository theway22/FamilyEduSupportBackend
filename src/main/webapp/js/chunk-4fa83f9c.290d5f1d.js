(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4fa83f9c","chunk-2d21b2be"],{bf48:function(e,t,l){"use strict";l.r(t),l.d(t,"VueUtil",(function(){return i})),Date.prototype.format=function(e){let t={"M+":this.getMonth()+1,"d+":this.getDate(),"H+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(let l in t)new RegExp("("+l+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[l]:("00"+t[l]).substr((""+t[l]).length)));return e};let i=function(e){this.http=e.$http,this.alert=e.$alert,this.confirm=e.$confirm,this.message=e.$message,this.isDuringDate=function(e,t){let l=new Date,i=new Date(e),s=new Date(t);return l>=i&&l<=s},this.isPasted=function(e,t){let l=new Date,i=(new Date(e),new Date(t));return l>i}}},e74a:function(e,t,l){"use strict";l.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"panel panel-default"},[t("div",{staticClass:"panel-heading"},[e._v(" 资讯管理 ")]),t("div",{staticClass:"panel-body"},[t("div",{staticClass:"search-options"},[t("table",{attrs:{cellspacing:"0",width:"100%"}},[t("tbody",[t("tr",[t("td",[e._v(" 标题: "),t("div",{staticStyle:{width:"200px",display:"inline-block"}},[t("el-input",{attrs:{placeholder:"标题"},model:{value:e.title,callback:function(t){e.title=t},expression:"title"}})],1),e._v(" 类别: "),t("el-cascader",{attrs:{options:e.options,props:{checkStrictly:!0},clearable:""},model:{value:e.lmvalue,callback:function(t){e.lmvalue=t},expression:"lmvalue"}}),t("el-button",{attrs:{type:"danger",icon:"el-icon-search"},on:{click:e.search}},[e._v("查找")])],1)])])])]),t("div",{staticClass:"clear"}),t("div",{staticClass:"action-details"},[t("el-button-group",[t("el-button",{attrs:{type:"success",icon:"el-icon-check"},on:{click:e.selectedAllHandler}},[e._v("选择")]),t("el-button",{attrs:{type:"danger",icon:"el-icon-delete"},on:{click:e.deleteRec}},[e._v(" 删除")])],1)],1),t("table",{staticClass:"ui-record-table",attrs:{id:"xinxi",width:"100%",border:"0",cellspacing:"0",cellpadding:"0"}},[t("thead",[t("tr",[t("th",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedAll,expression:"selectedAll"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.selectedAll)?e._i(e.selectedAll,null)>-1:e.selectedAll},on:{click:e.selectedAllHandler,change:function(t){var l=e.selectedAll,i=t.target,s=!!i.checked;if(Array.isArray(l)){var a=null,n=e._i(l,a);i.checked?n<0&&(e.selectedAll=l.concat([a])):n>-1&&(e.selectedAll=l.slice(0,n).concat(l.slice(n+1)))}else e.selectedAll=s}}})]),e._m(0),e._m(1),e._m(2),e._m(3),t("th",[e._v(" 操作 ")])])]),t("tbody",[e._l(e.listXinxi,(function(l,i){return t("tr",{key:l.id},[t("td",[t("input",{directives:[{name:"model",rawName:"v-model",value:l.rowSelected,expression:"xinxi.rowSelected"}],staticClass:"check",attrs:{name:"ids",type:"checkbox"},domProps:{checked:Array.isArray(l.rowSelected)?e._i(l.rowSelected,null)>-1:l.rowSelected},on:{change:function(t){var i=l.rowSelected,s=t.target,a=!!s.checked;if(Array.isArray(i)){var n=null,c=e._i(i,n);s.checked?c<0&&e.$set(l,"rowSelected",i.concat([n])):c>-1&&e.$set(l,"rowSelected",i.slice(0,c).concat(i.slice(c+1)))}else e.$set(l,"rowSelected",a)}}})]),t("td",[e._v(" "+e._s(l.title)+" ")]),t("td",[e._v(" "+e._s(l.lmname)+" ")]),t("td",[e._v(" "+e._s(l.pubtime)+" ")]),t("td",[t("i",{staticClass:"fa fa-eye"}),e._v(e._s(l.clickcount)+"次 ")]),t("td",[t("el-button-group",[t("route-button",{attrs:{icon:"el-icon-edit",url:"/admin/xinxiadd?id="+l.id}},[e._v("编辑 ")])],1)],1)])})),0==e.listXinxi.length?t("tr",[t("td",{attrs:{colspan:"20"}},[e._v(" 没有相关资讯信息 ")])]):e._e()],2)]),t("div",{staticClass:"clear"}),t("el-pagination",{attrs:{background:"","current-page":e.pageindex,"page-sizes":[e.pagesize],"page-size":e.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.pagesizeChange,"current-change":e.pageindexChange}})],1)])},s=[function(){var e=this,t=e._self._c;return t("th",[t("b",[e._v("标题")])])},function(){var e=this,t=e._self._c;return t("th",[t("b",[e._v("类别")])])},function(){var e=this,t=e._self._c;return t("th",[t("b",[e._v("发布时间")])])},function(){var e=this,t=e._self._c;return t("th",[t("b",[e._v("点击次数")])])}],a=l("bf48"),n={name:"xinximanager",data(){return{hostHead:this.$app.contextPath,listXinxi:[],options:[],lmvalue:[],pageindex:1,pagesize:10,total:10,selectedAll:!1,title:""}},async created(){console.log("created"),this.search(),this.getLanmus()},async mounted(){},methods:{pagesizeChange:function(e){this.pagesize=e},pageindexChange:function(e){this.pageindex=e,console.log(this.pageindex),this.search()},search(){let e={currentpageindex:this.pageindex,pagesize:this.pagesize,title:this.title};null!=this.lmvalue&&this.lmvalue.length>0&&(e.lmid=this.lmvalue[0]),null!=this.lmvalue&&this.lmvalue.length>=2&&(e.subtypeid=this.lmvalue[1]);let t="admin/xinxi/list";this.$http.post(t,e).then(e=>{if(console.log(e.data),null!=e.data&&null!=e.data.data){let t=e.data.data;this.total=t.total,null!=t.list&&(t.list.forEach(e=>{e.rowSelected=!1}),this.listXinxi=t.list)}})},async getLanmus(){let e="admin/xinxi/cascadelanmu",{data:t}=await this.$http.post(e,{id:this.lanmuid});t.stateCode<0?this.$message.error(t.des):this.options=t.data},selectedAllHandler(){this.selectedAll=!this.selectedAll,null!=this.listXinxi&&this.listXinxi.forEach(e=>{e.rowSelected=this.selectedAll})},async deleteOne(e){let t=new a["VueUtil"](this);if(null==e)return;let l=[e];t.confirm("是否要删除数据?","系统提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{t.http.post("admin/shangpin/delete",{ids:l},{emulateJSON:!1}).then(e=>{null!=e.data&&e.data.stateCode>0&&(t.message.success("删除成功"),this.search())})}).catch(()=>{})},async deleteRec(){let e="admin/xinxi/delete",t=new a["VueUtil"](this),l=this.listXinxi.filter(e=>e.rowSelected).map(e=>e.id);if(null!=l&&l.length<=0)return void t.alert("请选择需要删除的记录","系统提示",{confirmButtonText:"确定"});t.confirm("是否要删除数据?","系统提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{t.http.post(e,{ids:l},{emulateJSON:!1}).then(e=>{null!=e.data&&e.data.stateCode>0&&(t.message.success("删除成功"),this.search())})}).catch(()=>{})}}},c=n,r=l("2877"),o=Object(r["a"])(c,i,s,!1,null,"634c6161",null);t["default"]=o.exports}}]);
//# sourceMappingURL=chunk-4fa83f9c.290d5f1d.js.map
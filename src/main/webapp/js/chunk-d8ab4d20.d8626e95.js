(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d8ab4d20"],{"7f71":function(e,t,o){},9848:function(e,t,o){"use strict";o.r(t);var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"login"},[t("el-form",{ref:"loginForm",staticClass:"login-form",attrs:{model:e.loginForm,rules:e.loginRules}},[t("h3",{staticClass:"title"},[e._v("家庭教育救助网站")]),t("el-form-item",{attrs:{prop:"username"}},[t("el-input",{attrs:{"prefix-icon":"fa fa-user",type:"text","auto-complete":"off",placeholder:"账号"},model:{value:e.loginForm.username,callback:function(t){e.$set(e.loginForm,"username",t)},expression:"loginForm.username"}})],1),t("el-form-item",{attrs:{prop:"password"}},[t("el-input",{attrs:{"prefix-icon":"fa fa-lock",type:"password","auto-complete":"off",placeholder:"密码"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleLogin.apply(null,arguments)}},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}})],1),t("el-form-item",{attrs:{label:"用户类型",prop:"password"}},[t("el-radio-group",{model:{value:e.loginForm.usertype,callback:function(t){e.$set(e.loginForm,"usertype",t)},expression:"loginForm.usertype"}},[t("el-radio-button",{attrs:{label:"2"}},[e._v("普通用户")]),t("el-radio-button",{attrs:{label:"1"}},[e._v("管理员")])],1)],1),t("el-form-item",{attrs:{label:"验证码",prop:"code"}},[t("el-input",{staticStyle:{width:"140px"},attrs:{type:"text","auto-complete":"off",placeholder:"验证码"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleLogin.apply(null,arguments)}},model:{value:e.loginForm.code,callback:function(t){e.$set(e.loginForm,"code",t)},expression:"loginForm.code"}}),t("div",{staticClass:"login-code"},[t("span",{staticStyle:{width:"80px",border:"1px solid #ddd8ce",padding:"8px 12px",cursor:"pointer"},on:{click:e.getCode}},[e._v(" "+e._s(e.code))])])],1),t("el-form-item",{staticStyle:{width:"100%"}},[t("el-button",{staticStyle:{width:"100%"},attrs:{loading:e.loading,size:"medium",type:"primary"},nativeOn:{click:function(t){return t.preventDefault(),e.handleLogin.apply(null,arguments)}}},[e.loading?t("span",[e._v("登 录 中...")]):t("span",[e._v("登 录")])])],1),t("el-form-item",[t("div",{staticStyle:{width:"100%","text-align":"center"}},[t("router-link",{attrs:{to:"/e/index"}},[e._v("首页")])],1)])],1),e._m(0)],1)},s=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"el-login-footer"},[t("span",[e._v("Copyright 2023 All Rights Reserved.")])])}],i=(o("14d9"),{data(){return{loginForm:{username:"",password:"",usertype:2,code:"",rememberMe:!1},code:"",loading:!1,loginRules:{username:[{required:!0,trigger:"blur",message:"请输入您的账号"}],password:[{required:!0,trigger:"blur",message:"请输入您的密码"}],code:[{required:!0,trigger:"change",message:"请输入验证码"}]}}},watch:{},created(){this.getCode()},methods:{handleLogin(){this.$refs.loginForm.validate(async e=>{if(e){if(console.log("loginForm.code=",this.loginForm.code),this.code.toLowerCase()!=this.loginForm.code.toLowerCase())return void this.$message.error("验证码不正确");this.loading=!0;let e="admin/admin/login",{data:t}=await this.$http.post(e,{username:this.loginForm.username,password:this.loginForm.password,usertype:this.loginForm.usertype});if(console.log("res=",t),t.stateCode<0)return this.$message.error(t.des),void(this.loading=!1);1==this.loginForm.usertype&&(this.$app.mycas.login(this.$app.mycas.users_key,t.data),window.sessionStorage.removeItem(this.$app.mycas.huiyuan_key),this.$router.push("/admin/index")),2==this.loginForm.usertype&&(this.$app.mycas.login(this.$app.mycas.huiyuan_key,t.data),window.sessionStorage.removeItem(this.$app.mycas.users_key),this.$router.push("/huiyuan/index"))}})},getCode(){let e=new Array("1","2","3","4","5","6","7","8","9","0","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"),t="";for(var o=0;o<4;o++){var r=parseInt(Math.random()*e.length);t+=e[r]}return this.code=t,t}}}),a=i,n=(o("b8f0"),o("2877")),l=Object(n["a"])(a,r,s,!1,null,"91ccfc34",null);t["default"]=l.exports},b8f0:function(e,t,o){"use strict";o("7f71")}}]);
//# sourceMappingURL=chunk-d8ab4d20.d8626e95.js.map
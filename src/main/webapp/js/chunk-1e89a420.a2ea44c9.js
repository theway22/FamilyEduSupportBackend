(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1e89a420","chunk-2d21b2be"],{6359:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"panel panel-default"},[e("div",{staticClass:"panel-heading"},[t._v("视频课程管理")]),e("div",{staticClass:"search-options"},[e("table",{attrs:{cellspacing:"0",width:"100%"}},[e("tbody",[e("tr",[e("td",[t._v(" 标题: "),e("div",{staticStyle:{width:"200px",display:"inline-block"}},[e("el-input",{attrs:{placeholder:"标题"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})],1),t._v(" 类别: "),e("el-cascader",{attrs:{options:t.options,props:{checkStrictly:!0},clearable:""},model:{value:t.lmvalue,callback:function(e){t.lmvalue=e},expression:"lmvalue"}}),e("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.search}},[t._v("查找")])],1)])])])]),e("div",{staticClass:"clear"}),e("div",{staticClass:"action-details"},[e("el-button-group",[e("el-button",{attrs:{type:"success",icon:"el-icon-check"},on:{click:t.selectedAllHandler}},[t._v("选择")]),e("el-button",{attrs:{type:"danger",icon:"el-icon-delete"},on:{click:t.deleteRec}},[t._v(" 删除")]),e("router-link",{staticClass:"el-button el-button--primary el-icon-warning",attrs:{to:"/admin/yingpianadd"}},[t._v("发布课程")])],1)],1),e("div",{staticClass:"image-text-box3"},[e("div",{staticClass:"bd"},[t._l(t.listYingpian,(function(a){return e("div",{staticClass:"item"},[e("div",{staticClass:"image-ar"},[e("router-link",{attrs:{to:"/admin/yingpiandetails?id="+a.id}},[e("img",{attrs:{src:t.hostHead+a.tupian}}),e("input",{directives:[{name:"model",rawName:"v-model",value:a.rowSelected,expression:"yingpian.rowSelected"}],attrs:{type:"checkbox"},domProps:{value:a.id,checked:Array.isArray(a.rowSelected)?t._i(a.rowSelected,a.id)>-1:a.rowSelected},on:{change:function(e){var i=a.rowSelected,s=e.target,n=!!s.checked;if(Array.isArray(i)){var l=a.id,c=t._i(i,l);s.checked?c<0&&t.$set(a,"rowSelected",i.concat([l])):c>-1&&t.$set(a,"rowSelected",i.slice(0,c).concat(i.slice(c+1)))}else t.$set(a,"rowSelected",n)}}}),t._v(" "+t._s(a.title)+" ")])],1),e("div",{staticClass:"text-ar"},[e("div",{staticClass:"title"},[e("router-link",{attrs:{to:"/admin/yingpianadd?id="+a.id}},[t._v(t._s(a.title))])],1),e("div",{staticClass:"subtitle"},[e("el-tag",[t._v(t._s(a.typename)+"/"+t._s(a.subtypename))])],1),e("div",{staticClass:"time"},[t._v(t._s(a.pubtime))]),e("div",{staticClass:"abstract"},[1==a.state?e("router-link",{staticClass:"btn btn-danger",attrs:{title:"审核",to:"/admin/yingpianspnext?id="+a.id}},[e("i",{staticClass:"fa fa-check"}),t._v("审核")]):t._e()],1)]),e("div",{staticClass:"toolbar-op"},[e("div",{staticClass:"btn-group"},[e("span",{staticClass:"btn btn-danger",attrs:{title:"删除"},on:{click:function(e){return t.deleteOne(a.id)}}},[e("i",{staticClass:"fa fa-trash"})]),e("router-link",{staticClass:"btn btn-primary",attrs:{title:"编辑",to:"/admin/yingpianadd?id="+a.id}},[e("i",{staticClass:"fa fa-edit"})]),1==a.state?e("router-link",{staticClass:"btn btn-primary",attrs:{title:"审核",to:"/admin/yingpianspnext.jsp?id="+a.id}},[e("i",{staticClass:"fa fa-check"})]):t._e()],1)])])})),0==t.listYingpian.length?e("div",{staticClass:"no-record-tip white-paper",staticStyle:{width:"100%"}},[t._m(0)]):t._e()],2)]),e("div",{staticClass:"clear"}),e("el-pagination",{attrs:{"current-page":t.pageindex,"page-sizes":[t.pagesize],"page-size":t.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.pagesizeChange,"current-change":t.pageindexChange}}),e("div",{staticClass:"clear"})],1)},s=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("i",{staticClass:"fa fa-warning"}),t._v(" 没有相关内容 ")])}],n=(a("14d9"),a("bf48")),l={name:"yingpianmanager",data(){return{hostHead:this.$app.contextPath,listYingpian:[],options:[],lmvalue:[],pageindex:1,pagesize:10,total:10,selectedAll:!1,title:""}},async created(){console.log("created"),this.search(),this.getLanmus()},methods:{pagesizeChange:function(t){this.pagesize=t},pageindexChange:function(t){this.pageindex=t,console.log(this.pageindex),this.search()},search(){let t={currentpageindex:this.pageindex,pagesize:this.pagesize,title:this.title};null!=this.lmvalue&&this.lmvalue.length>0&&(t.typeid=this.lmvalue[0]),null!=this.lmvalue&&this.lmvalue.length>=2&&(t.subtypeid=this.lmvalue[1]);let e="admin/yingpian/list";this.$http.post(e,t).then(t=>{if(console.log(t.data),null!=t.data&&null!=t.data.data){let e=t.data.data;this.total=e.total,null!=e.list&&(e.list.forEach(t=>{t.rowSelected=!1}),this.listYingpian=e.list)}})},async getLanmus(){let t="admin/yingpian/cascadelanmu",{data:e}=await this.$http.post(t,{id:this.lanmuid});e.stateCode<0?this.$message.error(e.des):this.options=e.data},selectedAllHandler(){this.selectedAll=!this.selectedAll,null!=this.listYingpian&&this.listYingpian.forEach(t=>{t.rowSelected=this.selectedAll})},async deleteOne(t){let e=new n["VueUtil"](this);if(null==t)return;let a=[];a.push(t);let i="admin/yingpian/delete";e.confirm("是否要删除数据?","系统提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{e.http.post(i,{ids:a},{emulateJSON:!1}).then(t=>{null!=t.data&&t.data.stateCode>0&&(e.message.success("删除成功"),this.search())})}).catch(()=>{})},async deleteRec(){let t="admin/yingpian/delete",e=new n["VueUtil"](this),a=this.listYingpian.filter(t=>t.rowSelected).map(t=>t.id);if(null!=a&&a.length<=0)return void e.alert("请选择需要删除的记录","系统提示",{confirmButtonText:"确定"});e.confirm("是否要删除数据?","系统提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{e.http.post(t,{ids:a},{emulateJSON:!1}).then(t=>{null!=t.data&&t.data.stateCode>0&&(e.message.success("删除成功"),this.search())})}).catch(()=>{})}}},c=l,r=a("2877"),o=Object(r["a"])(c,i,s,!1,null,"72386081",null);e["default"]=o.exports},bf48:function(t,e,a){"use strict";a.r(e),a.d(e,"VueUtil",(function(){return i})),Date.prototype.format=function(t){let e={"M+":this.getMonth()+1,"d+":this.getDate(),"H+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(let a in e)new RegExp("("+a+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?e[a]:("00"+e[a]).substr((""+e[a]).length)));return t};let i=function(t){this.http=t.$http,this.alert=t.$alert,this.confirm=t.$confirm,this.message=t.$message,this.isDuringDate=function(t,e){let a=new Date,i=new Date(t),s=new Date(e);return a>=i&&a<=s},this.isPasted=function(t,e){let a=new Date,i=(new Date(t),new Date(e));return a>i}}}}]);
//# sourceMappingURL=chunk-1e89a420.a2ea44c9.js.map
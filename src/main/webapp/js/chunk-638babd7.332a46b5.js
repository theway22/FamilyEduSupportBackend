(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-638babd7","chunk-707e9921","chunk-2d0a47f7","chunk-2d21b2be"],{"0760":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t._self._c;return e("el-dialog",{attrs:{width:t.width,title:t.title,"close-on-click-modal":!1,visible:t.show},on:{"update:visible":t.closeHandler}},[t.reload?e(t.view,{tag:"component",attrs:{params:t.params},on:{close:t.closeHandler}}):t._e()],1)},i=[],n={name:"mydialog",data(){return{view:null,reload:!0,params:{}}},props:{url:{type:String,require:!0},width:{type:String,default:"80%"},xdata:{type:Object},title:{type:String,default:"详情"},show:{type:Boolean,require:!0}},methods:{loadComponent(t){return a("8673")("./"+t)},getParam(){if(-1==this.url.indexOf("?"))return{};let t=this.url.split("?")[1],e=new Object,a=t.split("&");for(var s=0;s<a.length;s++)e[a[s].split("=")[0]]=unescape(a[s].split("=")[1]);e=Object.assign(e,this.xdata),console.log("params",e),this.params=e},closeHandler(t){console.log("执行关闭"),this.$emit("update:show",t),this.$emit("close",!0)}},created(){let t=this.url;-1!=this.url.indexOf("?")&&(t=this.url.split("?")[0]),this.getParam(),console.log("this.params",this.params),t.startsWith("/")&&(t=t.substring(1)),this.loadComponent(t).then(t=>{this.view=t.default}),this.reload=!1,this.$nextTick(()=>{this.reload=!0})},watch:{show:{handler(t){if(!t)return;let e=this.url;-1!=this.url.indexOf("?")&&(e=this.url.split("?")[0]),this.getParam(),console.log("this.params",this.params),e.startsWith("/")&&(e=e.substring(1)),this.loadComponent(e).then(t=>{this.view=t.default}),this.reload=!1,this.$nextTick(()=>{this.reload=!0})},immediate:!0}}},l=n,o=a("2877"),r=Object(o["a"])(l,s,i,!1,null,"c578a174",null);e["default"]=r.exports},"0ed9":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"panel panel-default"},[e("div",{staticClass:"panel-heading"},[t._v(" 教育服务管理 ")]),e("div",{staticClass:"panel-body"},[e("div",{staticClass:"search-options"},[e("table",{attrs:{cellspacing:"0",width:"100%"}},[e("tbody",[e("tr",[e("td",[t._v(" 名称: "),e("div",{staticStyle:{width:"200px",display:"inline-block"}},[e("el-input",{attrs:{placeholder:"标题"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1),t._v(" 类别: "),e("el-cascader",{attrs:{options:t.options,props:{checkStrictly:!0},clearable:""},model:{value:t.lmvalue,callback:function(e){t.lmvalue=e},expression:"lmvalue"}}),e("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.search}},[t._v(" 搜索 ")])],1)])])])]),e("div",{staticClass:"action-details"},[e("el-button-group",[e("el-button",{attrs:{type:"success",icon:"el-icon-check"},on:{click:t.selectedAllHandler}},[t._v("选择")]),e("el-button",{attrs:{type:"danger",icon:"el-icon-delete"},on:{click:t.deleteRec}},[t._v("删除")]),e("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:t.shangjiaHandler}},[t._v("上架")]),e("el-button",{attrs:{type:"warning",icon:"el-icon-download"},on:{click:t.xiajiaHandler}},[t._v("下架")])],1)],1),e("div",{staticClass:"image-text-box3"},[e("div",{staticClass:"bd"},[t._l(t.listShangpin,(function(a){return e("div",{staticClass:"item"},[e("div",{staticClass:"image-ar"},[e("a",{attrs:{href:t.hostHead+"/admin/shangpindetails.jsp?id="+a.id}},[e("img",{attrs:{src:t.hostHead+a.images[0]}})]),e("span",{staticClass:"name"},[e("input",{directives:[{name:"model",rawName:"v-model",value:a.rowSelected,expression:"shangpin.rowSelected"}],attrs:{type:"checkbox"},domProps:{value:a.id,checked:Array.isArray(a.rowSelected)?t._i(a.rowSelected,a.id)>-1:a.rowSelected},on:{change:function(e){var s=a.rowSelected,i=e.target,n=!!i.checked;if(Array.isArray(s)){var l=a.id,o=t._i(s,l);i.checked?o<0&&t.$set(a,"rowSelected",s.concat([l])):o>-1&&t.$set(a,"rowSelected",s.slice(0,o).concat(s.slice(o+1)))}else t.$set(a,"rowSelected",n)}}}),t._v(t._s(a.name))])]),e("div",{staticClass:"text-ar"},[e("div",{staticClass:"title"},[e("a",{attrs:{href:t.hostHead+"/admin/shangpinadd.jsp?id="+a.id}},[t._v(t._s(a.name))])]),e("div",{staticClass:"subtitle"},[e("el-tag",[t._v(t._s(a.typename)+"/"+t._s(a.subtypename))])],1),e("div",{staticClass:"time"},[t._v(t._s(a.pubtime))]),e("div",{staticClass:"time"},[t._v(t._s(a.kucun)+t._s(a.danwei))]),e("div",[e("pop-dialog-button",{attrs:{title:"加库存",xdata:{userid:t.accountInfo.id},"css-class":"el-button el-button--danger",url:"/admin/kucunadd?id="+a.id},on:{refresh:t.search}},[e("i",{staticClass:"el-icon-plus"}),t._v("加库存")])],1)]),e("div",{staticClass:"toolbar-op"},[e("div",{staticClass:"el-button-group"},[e("el-button",{attrs:{type:"danger",icon:"el-icon-delete"},on:{click:function(e){return t.deleteOne(a.id)}}}),e("route-button",{attrs:{url:"/admin/shangpinadd?id="+a.id,icon:"el-icon-edit"}}),e("route-button",{attrs:{url:"/admin/shangpindetails?id="+a.id,title:"教育服务详情",type:"success",icon:"el-icon-info"}})],1)]),e("div",{staticClass:"tag"},[e("div",{staticClass:"name"},[1==a.state?e("span",[t._v("上架")]):t._e(),2==a.state?e("span",[t._v("下架")]):t._e()])])])})),0==t.listShangpin.length?e("div",{staticClass:"no-record-tip white-paper",staticStyle:{width:"100%"}},[t._m(0)]):t._e()],2)]),e("div",{staticClass:"clear"}),e("el-pagination",{attrs:{"current-page":t.pageindex,"page-sizes":[t.pagesize],"page-size":t.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.pagesizeChange,"current-change":t.pageindexChange}})],1)])},i=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("i",{staticClass:"fa fa-warning"}),t._v(" 没有相关内容 ")])}],n=a("bf48"),l=a("8a8f"),o={name:"shangpinmanager",data(){return{hostHead:this.$app.contextPath,listShangpin:[],options:[],lmvalue:[],pageindex:1,pagesize:10,total:10,selectedAll:!1,name:""}},async created(){this.search(),this.getLanmus()},props:{accountInfo:{type:Object}},components:{PopDialogButton:l["default"]},computed:{},methods:{pagesizeChange:function(t){this.pagesize=t},pageindexChange:function(t){this.pageindex=t,console.log(this.pageindex),this.search()},async search(){let t={currentpageindex:this.pageindex,pagesize:this.pagesize,spname:this.name};null!=this.lmvalue&&this.lmvalue.length>0&&(t.lmid=this.lmvalue[0]),null!=this.lmvalue&&this.lmvalue.length>=2&&(t.subtypeid=this.lmvalue[1]);let e="admin/shangpin/list",{data:a}=await this.$http.post(e,t);null!=a&&null!=a.data&&(this.total=a.data.total,null!=a.data.list&&(a.data.list.forEach(t=>{t.rowSelected=!1}),this.listShangpin=a.data.list))},async getLanmus(){let t="admin/shangpin/cascadelanmu",{data:e}=await this.$http.post(t,{id:this.lanmuid});e.stateCode<0?this.$message.error(e.des):this.options=e.data},selectedAllHandler(){this.selectedAll=!this.selectedAll,null!=this.listShangpin&&this.listShangpin.forEach(t=>{t.rowSelected=this.selectedAll})},async deleteOne(t){let e=new n["VueUtil"](this);if(null==t)return;let a=[t];e.confirm("是否要删除数据?","系统提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{e.http.post("admin/shangpin/delete",{ids:a},{emulateJSON:!1}).then(t=>{null!=t.data&&t.data.stateCode>0&&(e.message.success("删除成功"),this.search())})}).catch(()=>{})},async deleteRec(){let t="admin/shangpin/delete",e=new n["VueUtil"](this),a=this.listShangpin.filter(t=>t.rowSelected).map(t=>t.id);if(null!=a&&a.length<=0)return void e.alert("请选择需要删除的记录","系统提示",{confirmButtonText:"确定"});e.confirm("是否要删除数据?","系统提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{e.http.post(t,{ids:a},{emulateJSON:!1}).then(t=>{null!=t.data&&t.data.stateCode>0&&(e.message.success("删除成功"),this.search())})}).catch(()=>{})},async shangjiaHandler(){let t="admin/shangpin/shangjia",e=new n["VueUtil"](this),a=this.listShangpin.filter(t=>t.rowSelected).map(t=>t.id);if(null!=a&&a.length<=0)return void e.alert("请选择需要上架的教育服务","系统提示",{confirmButtonText:"确定"});let{data:s}=await e.http.post(t,{ids:a},{emulateJSON:!1});null!=s&&s.stateCode<0?e.message.error(s.des):(e.message.success("上架成功"),this.search())},async xiajiaHandler(){let t="admin/shangpin/xiajia",e=new n["VueUtil"](this),a=this.listShangpin.filter(t=>t.rowSelected).map(t=>t.id);if(null!=a&&a.length<=0)return void e.alert("请选择需要下架的教育服务","系统提示",{confirmButtonText:"确定"});let{data:s}=await e.http.post(t,{ids:a},{emulateJSON:!1});null!=s&&s.stateCode<0?e.message.error(s.des):(e.message.success("下架成功"),this.search())}}},r=o,c=a("2877"),d=Object(c["a"])(r,s,i,!1,null,"82fbc260",null);e["default"]=d.exports},6821:function(t,e,a){},"8a8f":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t._self._c;return e("div",{class:{inline:t.inline}},[e("span",{class:t.cssClass,on:{click:t.popHandler}},[t._t("default")],2),e("mydialog",{attrs:{width:t.width,show:t.showDlg,url:t.url,xdata:t.xdata,title:t.title},on:{"update:show":function(e){t.showDlg=e},close:t.closeHandler}})],1)},i=[],n=a("0760"),l={name:"PopDialogButton",data(){return{showDlg:!1}},methods:{popHandler(){this.showDlg=this.visible},closeHandler(t){this.$emit("refresh",!0)}},props:{url:{type:String,require:!0},visible:{type:Boolean,default:!0},inline:{type:Boolean,default:!0},xdata:{type:Object},title:{type:String,default:"标题"},cssClass:{type:String},width:{type:String,default:"80%"}},components:{mydialog:n["default"]},watch:{visible(t,e){this.showDlg=t}}},o=l,r=(a("e298"),a("2877")),c=Object(r["a"])(o,s,i,!1,null,"38004ee7",null);e["default"]=c.exports},bf48:function(t,e,a){"use strict";a.r(e),a.d(e,"VueUtil",(function(){return s})),Date.prototype.format=function(t){let e={"M+":this.getMonth()+1,"d+":this.getDate(),"H+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(let a in e)new RegExp("("+a+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?e[a]:("00"+e[a]).substr((""+e[a]).length)));return t};let s=function(t){this.http=t.$http,this.alert=t.$alert,this.confirm=t.$confirm,this.message=t.$message,this.isDuringDate=function(t,e){let a=new Date,s=new Date(t),i=new Date(e);return a>=s&&a<=i},this.isPasted=function(t,e){let a=new Date,s=(new Date(t),new Date(e));return a>s}}},e298:function(t,e,a){"use strict";a("6821")}}]);
//# sourceMappingURL=chunk-638babd7.332a46b5.js.map
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0af0c5"],{"0d50":function(e,t,s){"use strict";s.r(t);var l=function(){var e=this,t=e._self._c;return t("div",{staticClass:"mypanel"},[t("div",{staticClass:"hd"},[e._v(" ["+e._s(e.psColumn.pageName)+"]板块管理 ")]),t("div",{staticClass:"bd"},[t("div",{staticClass:"action-details"},[t("el-button-group",[t("el-button",{on:{click:e.deleteRec}},[t("i",{staticClass:"el-icon-delete"}),e._v("删除")]),t("route-button",{attrs:{icon:"el-icon-setting",type:"primary",url:"/admin/psitemadd?pageid="+e.psColumn.pageId}},[t("i",{staticClass:"el-icon-plus"}),e._v("添加板块")])],1)],1),t("table",{staticClass:"ui-record-table",attrs:{width:"100%",border:"0",cellspacing:"0",cellpadding:"0"}},[t("thead",[t("tr",[t("th",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedAll,expression:"selectedAll"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.selectedAll)?e._i(e.selectedAll,null)>-1:e.selectedAll},on:{click:e.selectedAllHandler,change:function(t){var s=e.selectedAll,l=t.target,i=!!l.checked;if(Array.isArray(s)){var a=null,c=e._i(s,a);l.checked?c<0&&(e.selectedAll=s.concat([a])):c>-1&&(e.selectedAll=s.slice(0,c).concat(s.slice(c+1)))}else e.selectedAll=i}}})]),e._m(0),e._m(1),t("th",[e._v(" 操作 ")])])]),t("tbody",[t("tr",{directives:[{name:"show",rawName:"v-show",value:0==e.listPsitem.length,expression:"listPsitem.length==0"}]},[t("td",{attrs:{colspan:"20"}},[e._v(" 没有相关页面信息 ")])]),e._l(e.listPsitem,(function(s){return t("tr",{key:s.id},[t("td",[t("input",{directives:[{name:"model",rawName:"v-model",value:s.rowSelected,expression:"psitem.rowSelected"}],staticClass:"check",attrs:{name:"ids",type:"checkbox"},domProps:{value:s.id,checked:Array.isArray(s.rowSelected)?e._i(s.rowSelected,s.id)>-1:s.rowSelected},on:{change:function(t){var l=s.rowSelected,i=t.target,a=!!i.checked;if(Array.isArray(l)){var c=s.id,d=e._i(l,c);i.checked?d<0&&e.$set(s,"rowSelected",l.concat([c])):d>-1&&e.$set(s,"rowSelected",l.slice(0,d).concat(l.slice(d+1)))}else e.$set(s,"rowSelected",a)}}})]),t("td",[e._v(e._s(s.lmName))]),t("td",[1==s.lmType?t("span",[e._v("资讯")]):e._e(),2==s.lmType?t("span",[e._v("教育服务板块")]):e._e(),3==s.lmType?t("span",[e._v("课程")]):e._e()]),t("td",[t("span",{staticClass:"el-button el-button--danger",attrs:{title:"删除"},on:{click:function(t){return e.deleteOne(s.id)}}},[t("i",{staticClass:"fa fa-trash-o"})])])])}))],2)])])])},i=[function(){var e=this,t=e._self._c;return t("th",[t("b",[e._v("板块名")])])},function(){var e=this,t=e._self._c;return t("th",[t("b",[e._v("板块类型")])])}],a=(s("14d9"),{name:"psitemmanager",data(){return{hostHead:this.$app.contextPath,name:"",selectedAll:!1,listPsitem:[],psColumn:{}}},created(){this.search()},methods:{async search(){let e="admin/psitem/list",t=this.$route.query.pageid,s={pageid:t},{data:l}=await this.$http.post(e,s);null!=l&&null!=l.data&&(this.psColumn=l.data,this.listPsitem=this.psColumn.psItemVos)},selectedAllHandler(){console.log(this.selectedAll),null!=this.listPsitem&&this.listPsitem.forEach(e=>{e.rowSelected=!this.selectedAll})},deleteRec(){let e=this.listPsitem.some(e=>1==e.rowSelected);if(!e)return void this.$alert("请选择需要删除的记录","系统提示",{confirmButtonText:"确定"});let t=this.listPsitem.filter(e=>e.rowSelected).map(e=>e.id);console.log("ids",t),this._doDelete({ids:t})},deleteOne(e){let t=[];t.push(e),this._doDelete({ids:t})},async _doDelete(e){let t={ids:[]};Object.assign(t,e);let s="admin/psitem/delete";await this.$confirm("是否要删除信息?","系统提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});if(null==t.ids||t.ids.length<=0)return;let{data:l}=await this.$http.post(s,{ids:t.ids},{emulateJSON:!1});l.stateCode>0&&(this.$message({message:"删除成功",type:"success",duration:3e3}),this.search())}}}),c=a,d=s("2877"),n=Object(d["a"])(c,l,i,!1,null,"4e778a83",null);t["default"]=n.exports}}]);
//# sourceMappingURL=chunk-2d0af0c5.907452d0.js.map